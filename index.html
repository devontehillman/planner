<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>

      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <div class="row">
        <div class="col-2 hour" id="hour" >9am</div>
        <textarea class="col-8 text " data-number="9"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">10am</div>
        <textarea class="col-8 text" data-number="10" ></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">11am</div>
        <textarea class="col-8 text" data-number="11"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">12am</div>
        <textarea class="col-8 text" data-number="12"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">1pm</div>
        <textarea class="col-8 text" data-number="13"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">2pm</div>
        <textarea class="col-8 text" data-number="14"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">3pm</div>
        <textarea class="col-8 text" data-number="15"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">4pm</div>
        <textarea class="col-8 text" data-number="16"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">5pm</div>
        <textarea class="col-8 text" data-number="17"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">6pm</div>
        <textarea class="col-8 text" data-number="18"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">7pm</div>
        <textarea class="col-8 text" data-number="19"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">8pm</div>
        <textarea class="col-8 text" data-number="20"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">9pm</div>
        <textarea class="col-8 text" data-number="21"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>
      <div class="row">
        <div class="col-2 hour" id="hour">10pm</div>
        <textarea class="col-8 text" data-number="22"></textarea>
        <button class="col-2 saveBtn" save="0">
            <i class="fas fa-save"></i> Save
        </button>
      </div>

      </div>
    

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

    <script>
    const timeslot  = Array.from(document.querySelectorAll('.text'));
    //timeslot[0].classList += " future";
      

      //adding date and time to heading
      var update = function () {
        document.getElementById("currentDay").innerHTML = moment().format("MMMM Do YYYY, h:mm:ss a");
      };
      setInterval(update, 1000);
    //add onclick for button once clicked that it will save the text in local storage
    var arr = []
    $(".saveBtn").click(function(){
         // prev for the last
        //get the textarea index and save it 
        var userString = ($(this).prev()).val();
        var count = ($(this).prev()).data('number');
        console.log(count)
        console.log(userString)
        arr[count]= userString;
        console.log(arr)     
        
        var i ; 
        for (i = 0; i < 24; i++){
          if (arr[i] == null){
          arr[i]= ""
          console.log(arr[i])
          }
          console.log(arr)
        }


        localStorage.setItem("userString",JSON.stringify(arr));
        })  
        
        //when page reload set the text area val to the stored item
        var saved = JSON.parse(localStorage.getItem('userString'))
        
        // var i = 0;
        // for (i = 0; i < 24;i++){
        //     timeslot[i].innerHTML = saved[i]
            
        // }
    //add fuctionality that changes the color based on time and use the css 
    
    //initialize date object

    // var d = new Date(); // do i need this ?

    // var currentHour = 14//d.getHours(); //note 0-23
    //switches between the three classes
    function pastfunction() {
    timeslot[i].classList.toggle("past");
    timeslot[i].classList.remove("present","future");
    }
    function presentfunction() {
    timeslot[i].classList.toggle("present");
    timeslot[i].classList.remove("past","future");
    }
    function futurefunction() {
    timeslot[i].classList.toggle("future");
    timeslot[i].classList.remove("past","present");
    }
    var d = new Date();
    var currentHour = d.getHours(); //note 0-23

// make this run evey
function colorfunction(){
var i = 0
for (i ; i < timeslot.length; i++){
  var currentHour = d.getHours(); //note 0-23
  var time = parseInt(timeslot[i].dataset['number'])
  if (currentHour === time){
    timeslot[i].classList.toggle("present");
    timeslot[i].classList.remove("past","future");
  }else if (currentHour > time ) {
    timeslot[i].classList.toggle("past");
    timeslot[i].classList.remove("present","future");
  }else{
    timeslot[i].classList.toggle("future");
    timeslot[i].classList.remove("past","present");
  } 
}
}

var colorchange = setInterval(colorfunction(), 1000); //use to update colors every hour 

//todo
//camel case things
// future improvments use jquery to ease proccess
    </script>
  </body>
</html>


 